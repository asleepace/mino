{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Mino",
  "scopeName": "source.mino",
  "patterns": [
    {
      "include": "#comments"
    },
    {
      "name": "keyword.control.directive.mino",
      "match": "^\\s*@end\\s*$"
    },
    {
      "include": "#html-block"
    },
    {
      "include": "#css-block"
    },
    {
      "include": "#component-block"
    },
    {
      "include": "#macro-block"
    }
  ],
  "repository": {
    "comments": {
      "patterns": [
        {
          "name": "comment.line.double-slash.mino",
          "match": "//.*$"
        },
        {
          "name": "comment.block.mino",
          "begin": "/\\*",
          "end": "\\*/"
        }
      ]
    },
    "html-block": {
      "name": "meta.html.mino",
      "begin": "^([\\t ]*)(@html)\\s+([\\w_]+)(?:\\s*:\\s*([^\\n]+))?\\s*$",
      "beginCaptures": {
        "2": { "name": "keyword.control.directive.mino" },
        "3": { "name": "entity.name.function.html.mino" },
        "4": { "name": "variable.parameter.mino" }
      },
      "contentName": "text.html.basic",
      "while": "^(?:\\s*$|\\1[\\t ].*)",
      "patterns": [
        { "include": "#token-interpolation" },
        { "include": "#children-placeholder" },
        { "include": "text.html.basic" }
      ]
    },
    "css-block": {
      "name": "meta.css.mino",
      "begin": "^([\\t ]*)(@css)\\s+([\\w_]+)(?:\\s*:\\s*([^\\n]+))?\\s*$",
      "beginCaptures": {
        "2": { "name": "keyword.control.directive.mino" },
        "3": { "name": "entity.name.function.css.mino" },
        "4": { "name": "variable.parameter.mino" }
      },
      "contentName": "source.css",
      "while": "^(?:\\s*$|\\1[\\t ].*)",
      "patterns": [
        { "include": "#token-interpolation" },
        { "include": "source.css" }
      ]
    },
    "component-block": {
      "name": "meta.component.mino",
      "begin": "^([\\t ]*)(@component)\\s+([\\w_]+)(?:\\s*:\\s*([^\\n]+))?\\s*$",
      "beginCaptures": {
        "2": { "name": "keyword.control.directive.component.mino" },
        "3": { "name": "entity.name.class.component.mino" },
        "4": { "name": "variable.parameter.mino" }
      },
      "contentName": "source.js",
      "while": "^(?:\\s*$|\\1[\\t ].*)",
      "patterns": [
        { "include": "#self-keyword" },
        { "include": "source.js" }
      ]
    },
    "macro-block": {
      "name": "meta.macro.mino",
      "begin": "^([\\t ]*)(@macro)\\s+([\\w_]+)(?:\\s*:\\s*([^\\n]+))?\\s*$",
      "beginCaptures": {
        "2": { "name": "keyword.control.directive.macro.mino" },
        "3": { "name": "entity.name.function.macro.mino" },
        "4": { "name": "variable.parameter.mino" }
      },
      "contentName": "source.js",
      "while": "^(?:\\s*$|\\1[\\t ].*)",
      "patterns": [
        { "include": "source.js" }
      ]
    },
    "token-interpolation": {
      "patterns": [
        {
          "name": "variable.other.token.numeric.mino",
          "match": "\\$\\d+"
        },
        {
          "name": "variable.other.token.named.mino", 
          "match": "\\$[a-zA-Z_][a-zA-Z0-9_]*"
        }
      ]
    },
    "children-placeholder": {
      "name": "variable.other.children.mino",
      "match": "\\$children"
    },
    "self-keyword": {
      "name": "variable.language.self.mino",
      "match": "\\bself\\b"
    }
  }
}